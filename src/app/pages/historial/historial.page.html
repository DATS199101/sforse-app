
<ion-header [translucent]="true">
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/principal"></ion-back-button>
    </ion-buttons>
    <ion-title>Hoja de Vida</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="ion-padding">

  <div *ngIf="soldado" style="text-align: center; margin-bottom: 20px; border-bottom: 1px solid #ccc; padding-bottom: 15px;">
    <ion-avatar style="margin: 0 auto; width: 80px; height: 80px;">
      <img src="assets/icon/favicon.png" />
    </ion-avatar>
    <h2>{{ soldado.nombres }} {{ soldado.apellidos }}</h2>
    <p>CompaÃ±Ã­a: <strong>{{ soldado.compania }}</strong></p>
    
    <ion-chip color="dark" outline="true">
      <ion-icon name="warning-outline"></ion-icon>
      <ion-label>Total Faltas: {{ historial.length }}</ion-label>
    </ion-chip>
  </div>

  <div *ngIf="cargando" style="text-align: center; margin-top: 50px;">
    <ion-spinner name="crescent"></ion-spinner>
    <p>Buscando historial...</p>
  </div>

  <div *ngIf="!cargando && historial.length === 0" style="text-align: center; margin-top: 50px; opacity: 0.6;">
    <ion-icon name="ribbon-outline" style="font-size: 60px; color: gold;"></ion-icon>
    <h3>Â¡Excelente conducta!</h3>
    <p>Este aspirante no tiene sanciones registradas.</p>
  </div>

  <ion-list *ngIf="historial.length > 0">
    <ion-item-group>
      <ion-item-divider color="light">
        <ion-label>Historial de Sanciones</ion-label>
      </ion-item-divider>

      <ion-item *ngFor="let item of historial">
        <ion-label class="ion-text-wrap">
          <h2>{{ item.descripcion }}</h2>
          
          <p>{{ item.observacion_adicional }}</p>
          <p style="font-size: 12px; color: #888;">ðŸ“… {{ item.fecha_sancion | date:'medium' }}</p>
        </ion-label>

        <ion-badge slot="end" [color]="item.tipo_falta === 'Leve' ? 'success' : 'danger'">
          {{ item.tipo_falta }} ({{ item.demerito }} pts)
        </ion-badge>
      </ion-item>
    </ion-item-group>
  </ion-list>

</ion-content>